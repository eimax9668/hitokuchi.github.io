<!DOCTYPE html>
<html lang="ja">
    <head>
        <title>風船みたいなSNS - hitokuchi</title>

        <meta charset="utf-8">
        <meta property="og:title" content="まるで風船につけた手紙のようなSNSサービス - hitokuchi">
        <meta property="og:description" content="hitokuchi(ひとくち)とは登録不要で知らない誰かにメッセージを送ったり、知らない誰かから受け取ったりできるメッセージングサービスです！">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="shortcut icon" href="../hitokuchi_logo.webp" type="image/webp">
        <link rel="stylesheet" href="../pagestyle.css">

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-FCB1XEM56C"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-FCB1XEM56C');
        </script>
    </head>
    <body>
        <div id="box">
        <h2>Welcome to hitokuchi!</h2>
            <a href="../index.html" class="link_color"> 〈　Back to index　〉</a><br>
            <a href="../dot/index.html" class="link_color">〈　？？？　〉</a><br>
            <p></p>
            <small>表示が崩れた場合はF5+Shift(もしくはShiftを押しながらリロードボタンを押す)を試してください</small>
        </div>
        <br>
        <div id="box">
            <h3>★ イベント情報 ★</h3>
            <p id="events">特になし</p>
        </div>
        <!-- ポイントシステムは一時停止
        <br>
        <div id="box">
            <h3>ポイントを貯める</h3>
            ▶<a href="./getpoint.html">ポイントポータルに行く</a>◀
        </div>-->
        <br>
        <div id="box">
            <p>
                hitokuchi(ひとくち)は登録不要で知らない誰かにメッセージを送ったり、<br>
                知らない誰かから受け取ったりできるメッセージングサービスです！<br>
            </p>
            <p>
                しかもこれは、一回送ったきりで会話を続けることができないため、<wbr>風船につけた手紙のような気分が味わえます！
            </p>
            ▶<a href="./send.html" class="link_color">メッセージを送る</a>◀
            <br>
            <small>【無料】</small>
            <br>
            ▶<a href="./mes.html" class="link_color">メッセージを受け取る</a>◀
            <br>
            <small>【無料】</small>
            <hr>

            ▶<a href="../mail/index.html" class="link_color">hitokuchi mail へ行く</a>◀
            <br>
            <small>
                登録しあっている人同士で、簡易的なメールのやり取りが出来ます<br>
                【無料】
            </small>
            <br>

            ▶<a href="../review/index.html" class="link_color">hitokuchi review へ行く</a>◀
            <br>
            <small>サイトの評価や宣伝が出来ます【無料】</small>
            <br>

            ▶<a href="../note/index.html" class="link_color">hitokuchi note へ行く</a>◀
            <br>
            <small>自分の技術や知恵などをブログの様に共有することが出来ます【無料】</small>
        </div>
        <br>
        <div id="box">
            <h3>拡散してね！</h3>
            <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-hashtags="hitokuchi" data-show-count="false" data-related="test0170474925" id="share_button">Tweet</a>
            <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            <br>

            <small>hitokuchi 総合index</small>
            <input type="url" class="text" value="https://hitokuchi.f5.si" readonly><br>
            <small>hitokuchi 日本語index</small>
            <input type="url" class="text" value="https://hitokuchi.f5.si/ja-JP/index.html" readonly><br>
            <hr>

            バナーもあるよ<br>
            <a href="https://hitokuchi.f5.si" target="_blank"><img src="../banner/hitokuchi_banner.png" alt="バナー"></a><br>
            <div id="code">
                <code>
                    <pre>&lt;a href="https://hitokuchi.f5.si" target="_blank"&gt;
    &lt;img src="https://hitokuchi.f5.si/banner/hitokuchi_banner.png" alt="バナー"&gt;
&lt;/a&gt;</pre>
                </code>
            </div>
            <br>
        </div>
        <br>
        <div id="box">
            <h3>お問い合わせ・削除要請等</h3>
            
            <small>
                返信を希望する際は本文中にDiscord名、Twitterユーザー名<wbr>もしくはemailを入力してください<br>
                DiscordとTwitterではDMへ<wbr>　emailでは自分のemailでやってまいります<br>
                いずれも未入力の場合で返信が必要な時はこのサイト上でメッセージをほぼ全文表示して返信いたします<br>
                怪しい内容やよくわからない内容には返信・反応は出来ません
            </small><br>
            件名<br>
            <input type="text" id="message_about" class="text"><br>
            お問い合わせ内容<br>
            <textarea id="area" class="toiawase" style="height: 100px;"></textarea><br>

            <script src="../mail/config.js"></script>
            <script>
                async function send() {
                    const url = key.url;
                    const states = document.getElementById("states");
                
                    states.innerHTML = "お待ちください...";
                    states.style.color = "red";

                    const user_id = "admin";
                    const from_id = `お問い合わせ<br>件名: ${document.getElementById("message_about").value}`;

                    let message = document.getElementsByClassName("toiawase")[0].value;
                    message = message.split("&").join("&amp;"); // 下の&と一緒にreplaceされてしまうので修正
                    message = message.split("<").join("&lt;"); // &lt;&gt;
                    message = message.split(">").join("&gt;");
                    message = message.split("\n").join("<br>");

                    message = message.replace(/\$\((.+?)\)\[(.+?)\]/g, "<a href='$1' target='_blank'>$2</a>");
                    message = message.replace(/\[b (.+?)\]/g, "<span class='hutoji'>$1</span>");
                    message = message.replace(/\[i (.+?)\]/g, "<span class='shatai'>$1</span>");
                    message = message.replace(/\[d (.+?)\]/g, "<span class='torikeshi'>$1</span>");

                    const today = new Date();
                    const today_text = `${today.getFullYear()}/${today.getMonth()+1}/${today.getDate()}`;
                    message = message.replace(/:DATE:/g, `<span>${today_text}</span>`);

                    if (document.getElementById("message_about").value.trim() != "" && message.trim() != "" && user_id.trim() != "") {
                            const response = await fetch(
                                url,
                                {
                                    method: "POST",
                                    body: JSON.stringify({
                                        "to": user_id,
                                        "from": from_id,
                                        "message": message,
                                        "request": "send"
                                    })
                                }
                        )
                        .then((response) => response.text())

                        .then((data)=>{
                            return JSON.parse(data);
                        })
                        .catch((error) => {
                            return "posterror";
                        });

                        if (response.result.match("wrong_to")) {
                            states.innerHTML = "エラー: 宛先が誤っています";
                        } else if (response.result.match("ok")) {
                            document.getElementById("message_about").value = "";
                            document.getElementsByClassName("toiawase")[0].value = "";
                            states.innerHTML = "送信済み";
                        }
                    } else {
                        states.innerHTML = "エラー: メッセージ等を入力してください";
                    }
                }
            </script>

            <button onclick="send()">　送信　</button><br>
            <small id="states"></small>
            <p></p>
        </div>
        
        <br>
        <div id="box">
            <h3>管理人の部屋</h3>
            ▶<a href="../admin_room/index.html" class="link_color">Let's go!!!!</a>◀
            <p></p>
        </div>

        <script>
            window.onload = () => {
                const day = new Date().getDay();
                // document.getElementById("events").innerHTML = "";
            }
        </script>
        <style>
            #special_box {
                border: 3px none black;
                border-radius: 5px 5px;
                height: 100%;
                width: 90%;
                background-color: rgb(206, 230, 255);
            }
        </style>
    </body>
</html>